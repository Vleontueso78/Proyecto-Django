{% extends "finanzas/base.html" %}
{% load static %}

{% block title %}Configurar calendario{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/finanzas/calendario/global.css' %}">
<link rel="stylesheet" href="{% static 'css/finanzas/calendario/formulario.css' %}">
{% endblock %}

{% block content %}

<div id="dashboard-container" class="fade-in">

    <h2 id="titulo-finanzas">üìÖ Configuraci√≥n del calendario</h2>

    <!-- ==============================
         BOT√ìN VOLVER
    ============================== -->
    <div class="volver-dashboard">
        <a href="{% url 'finanzas:dashboard' %}" class="btn btn-ghost">
            ‚¨Ö Volver al dashboard
        </a>
    </div>

    <!-- ==============================
         CARD: EXPLICACI√ìN
    ============================== -->
    <div class="card card-anim card-delay-1 center">

        <p class="muted">
            Eleg√≠ desde qu√© d√≠a quer√©s comenzar a registrar tus gastos diarios.
        </p>

        <p class="note">
            Se crear√°n autom√°ticamente todos los d√≠as desde esa fecha hasta hoy.
        </p>

        <!-- ==============================
             ESTADO ACTUAL DEL CALENDARIO
        ============================== -->
        {% if config.fecha_inicio_registros %}
            <div class="estado-calendario success">
                üìå Actualmente ten√©s registros desde
                <strong>{{ config.fecha_inicio_registros|date:"d/m/Y" }}</strong>
            </div>
        {% else %}
            <div class="estado-calendario warning">
                ‚ö†Ô∏è Todav√≠a no configuraste una fecha de inicio
            </div>
        {% endif %}

    </div>

    <!-- ==============================
         CARD: FORMULARIO
    ============================== -->
    <div class="card card-anim card-delay-2">

        <form method="POST" class="calendario-form" id="form-calendario">
            {% csrf_token %}

            <label for="fecha_inicio" class="form-label">
                Fecha de inicio
            </label>

            <input
                type="date"
                id="fecha_inicio"
                name="fecha_inicio"
                required
                class="input-fecha"
                value="{{ config.fecha_inicio_registros|date:'Y-m-d' }}"
                data-original="{{ config.fecha_inicio_registros|date:'Y-m-d' }}"
            >

            <div class="form-actions">

                <button type="submit" class="btn btn-accent">
                    Generar registros
                </button>

                <a href="{% url 'finanzas:dashboard' %}" class="btn btn-ghost">
                    Cancelar
                </a>

            </div>

        </form>

    </div>

</div>

{% endblock %}

{% block extra_js %}
<script src="{% static 'js/finanzas/calendario/confirmar_generacion.js' %}"></script>
{% endblock %}