{% extends "finanzas/base.html" %}
{% load static %}

{% block title %}Completar dÃ­a pendiente{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/finanzas/finanzas_dashboard/global.css' %}">
<link rel="stylesheet" href="{% static 'css/finanzas/finanzas_dashboard/botones.css' %}">
<link rel="stylesheet" href="{% static 'css/finanzas/finanzas_dashboard/pendientes.css' %}">
<link rel="stylesheet" href="{% static 'css/finanzas/finanzas_dashboard/registro_diario.css' %}">
{% endblock %}

{% block content %}

<div class="card card-anim fade-in" style="max-width: 600px; margin: auto;">

    <h2 class="center mb-4">
        ğŸ“ Completar registro<br>
        <span class="muted">DÃ­a {{ fecha|date:"d/m/Y" }}</span>
    </h2>

    <form method="POST" novalidate>
        {% csrf_token %}

        <!-- ====== PARA GASTAR ===== -->
        <div class="editable-field">
            <label for="input-para-gastar">Para gastar del dÃ­a</label>
            <input
                id="input-para-gastar"
                type="number"
                step="0.01"
                name="para_gastar_dia"
                class="editable-number"
                value="{{ form_values.para_gastar_dia|default_if_none:'0' }}"
            >
            <button type="button" class="edit-btn" data-target="input-para-gastar">âœ</button>
        </div>

        <!-- ====== ALIMENTO ===== -->
        <div class="editable-field">
            <label for="input-alimento">
                Alimento
                {% if fixed_fields.alimento %}
                    <button
                        type="button"
                        class="lock-btn"
                        data-target="input-alimento"
                        title="Este valor estÃ¡ fijado. Click para editar">
                        ğŸ”’
                    </button>
                {% endif %}
            </label>
            <input
                id="input-alimento"
                type="number"
                step="0.01"
                name="alimento"
                class="editable-number {% if fixed_fields.alimento %}input-locked{% endif %}"
                value="{{ form_values.alimento|default_if_none:'0' }}"
                {% if fixed_fields.alimento %}
                    readonly
                    data-locked="true"
                {% endif %}
            >
        </div>

        <!-- ====== PRODUCTOS ===== -->
        <div class="editable-field">
            <label for="input-productos">
                Productos
                {% if fixed_fields.productos %}
                    <button
                        type="button"
                        class="lock-btn"
                        data-target="input-productos"
                        title="Este valor estÃ¡ fijado. Click para editar">
                        ğŸ”’
                    </button>
                {% endif %}
            </label>
            <input
                id="input-productos"
                type="number"
                step="0.01"
                name="productos"
                class="editable-number {% if fixed_fields.productos %}input-locked{% endif %}"
                value="{{ form_values.productos|default_if_none:'0' }}"
                {% if fixed_fields.productos %}
                    readonly
                    data-locked="true"
                {% endif %}
            >
        </div>

        <!-- ====== AHORRO / DEUDA ===== -->
        <div class="editable-field">
            <label for="input-ahorro">
                Ahorro / Deuda
                {% if fixed_fields.ahorro_y_deuda %}
                    <button
                        type="button"
                        class="lock-btn"
                        data-target="input-ahorro"
                        title="Este valor estÃ¡ fijado. Click para editar">
                        ğŸ”’
                    </button>
                {% endif %}
            </label>
            <input
                id="input-ahorro"
                type="number"
                step="0.01"
                name="ahorro_y_deuda"
                class="editable-number {% if fixed_fields.ahorro_y_deuda %}input-locked{% endif %}"
                value="{{ form_values.ahorro_y_deuda|default_if_none:'0' }}"
                {% if fixed_fields.ahorro_y_deuda %}
                    readonly
                    data-locked="true"
                {% endif %}
            >
        </div>

        <!-- ====== SOBRANTE ===== -->
        <div class="editable-field">
            <label>Sobrante (cÃ¡lculo automÃ¡tico)</label>
            <div class="presupuesto-display">
                <span class="signo-sobrante">$</span>
                <input
                    type="number"
                    readonly
                    class="editable-number input-locked"
                    value="{{ registro.sobrante_monetario|default_if_none:'0' }}"
                >
            </div>
        </div>

        <button type="submit" class="btn btn-primary w-full mt-5">
            ğŸ’¾ Guardar registro
        </button>
    </form>

    <div class="center mt-4">
        <a class="btn btn-ghost" href="{% url 'finanzas:registros_pendientes' %}">
            â† Volver a pendientes
        </a>
    </div>

</div>

{% endblock %}

{% block extra_js %}
<script src="{% static 'js/finanzas/sobrante.js' %}"></script>
<script src="{% static 'js/finanzas/dashboard.js' %}"></script>
<script src="{% static 'js/finanzas/completar_pendiente.js' %}"></script>
{% endblock %}